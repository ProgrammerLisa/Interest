{"version":3,"sources":["components/loading.tsx","components/scroll.tsx","components/error.tsx","router/setRouter.tsx","router/routes.tsx","views/sidebar/siderbar.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["Loading","React","Component","history","createBrowserHistory","listen","location","action","currentY","document","documentElement","scrollTop","body","setTimeout","scrollAnimation","ScrollToTopOnMount","this","props","targetY","needScrollTop","_currentY","dist","Math","ceil","window","scrollTo","defaultProps","withRouter","ErrorBounday","state","hasError","children","setRouterList","routeList","map","Element","loader","AsyncLoadComponent","component","Loadable","loading","pastDelay","delay","Login","gamesRouter","path","name","exact","icon","webglRouter","gamesRoutes","webglRoutes","routes","Nav","toggleMenu","status","setState","isOpen","Sidebar","Pushable","as","Segment","Menu","animation","inverted","vertical","visible","width","Item","to","Icon","Pusher","fallback","className","route","key","App","Boolean","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"8LAEqBA,E,iLAEjB,OACE,+C,GAH+BC,IAAMC,W,gBCcvCC,EAAUC,cACdD,EAAQE,QAAO,SAACC,EAAUC,GACxB,IAAIC,EAAWC,SAASC,gBAAgBC,WAAaF,SAASG,KAAKD,UACnEE,YAAW,WACM,QAAXN,GACJO,EAAgBN,EAAU,S,IAOxBO,E,4LAEF,IAAIP,EAAWC,SAASC,gBAAgBC,WAAaF,SAASG,KAAKD,UACjC,QAA9BK,KAAKC,MAAMd,QAAQI,QACvBO,EAAgBN,EAAU,K,+BAG1B,OAAO,S,GAPsBN,aAWjC,SAASY,EAAgBN,EAAkBU,GACzC,IAAIC,EAAgBD,EAAUV,EAC1BY,EAAYZ,EAChBK,YAAW,WACT,IAAMQ,EAAOC,KAAKC,KAAKJ,EAAgB,IACvCC,GAAaC,EACbG,OAAOC,SAASL,EAAWZ,GACvBW,EAAgB,IAAMA,GAAiB,GACzCL,EAAgBM,EAAWF,GAE3BM,OAAOC,SAASL,EAAWF,KAE5B,GAGJH,EAA2BW,aAAe,CACzCvB,QAASA,GAIIwB,kBAAWZ,GClCXa,E,YAnBb,WAAaX,GAAa,IAAD,8BACvB,4CAAMA,KACDY,MAAQ,CACXC,UAAU,GAHW,E,sEAYvB,OAAId,KAAKa,MAAMC,SACN,qDAEFd,KAAKC,MAAMc,Y,kDAPlB,MAAO,CAAED,UAAU,O,GATI7B,IAAMC,WC+ClB8B,MA7Bf,SAAuBC,GAYrB,OAXeA,EAAUC,KAAI,SAAAC,GAC3B,IAaeC,EAbTC,GAaSD,EAbsBD,EAAQG,UAcxCC,IAAS,CACdH,SACAI,QAAS,SAAAvB,GACP,OAAIA,EAAMwB,UACD,kBAAC,EAAD,MAEA,MAGXC,MAAO,OAfP,OAAO,eAAKP,EAAZ,CAAqBG,UANA,kBACnB,kBAAC,EAAD,KACE,kBAAC,EAAD,MACA,kBAACD,EAAD,cC9BR,sGAWA,IAAMM,EAAQ,kBAAM,oEAqDdC,EACN,CACE,CACEC,KAAM,UACNC,KAAM,qBACNR,UArDW,kBAAM,gCAsDjBS,OAAO,EACPC,KAAM,eAER,CACEH,KAAM,aACNC,KAAM,qBACNR,UA7Dc,kBAAM,sDA8DpBS,OAAO,EACPC,KAAM,MAER,CACEH,KAAM,YACNC,KAAM,iCACNR,UAlEa,kBAAM,oEAmEnBS,OAAO,EACPC,KAAM,sBAIJC,EACN,CACE,CACEJ,KAAM,SACNC,KAAM,iBACNR,UA5EU,kBAAM,sDA6EhBS,OAAO,EACPC,KAAM,uBAER,CACEH,KAAM,kBACNC,KAAM,2BACNR,UAlFkB,kBAAM,oEAmFxBS,OAAO,EACPC,KAAM,kBAER,CACEH,KAAM,eACNC,KAAM,2BACNR,UAxFe,kBAAM,6DAyFrBS,OAAO,EACPC,KAAM,WAER,CACEH,KAAM,oBACNC,KAAM,uCACNR,UA9FoB,kBAAM,sDA+F1BS,OAAO,EACPC,KAAM,kBAaJf,EAAS,UAnGf,CACE,CACEY,KAAM,IACNC,KAAM,OACNR,UAAWK,EACXI,OAAO,GAET,CACEF,KAAM,SACNC,KAAM,QACNR,UAAWK,EACXI,OAAO,GAET,CACEF,KAAM,SACNC,KAAM,QACNR,UAnCU,kBAAM,gCAoChBS,OAAO,GAET,CACEF,KAAM,SACNC,KAAM,QACNR,UAxCU,kBAAM,sDAyChBS,OAAO,GAET,CACEF,KAAM,OACNC,KAAM,MACNR,UA7Ca,kBAAM,gCA8CnBS,OAAO,IAsE6BH,EAAgBK,EATrC,CACjB,CACEJ,KAAM,QACNC,KAAM,uCACNR,UAvGS,kBAAM,sDAwGfS,OAAO,EACPC,KAAM,mBAIGE,EAAclB,EAAcY,GAC5BO,EAAcnB,EAAciB,GAC5BG,EAASpB,EAAcC,I,mSCvErBoB,E,2MApDbC,WAAa,SAACC,GACZ,EAAKC,SAAS,CACZC,QAASF,K,wEAIX,OACE,kBAAC,IAAD,KACE,kBAACG,EAAA,EAAQC,SAAT,CAAkBC,GAAIC,KACpB,kBAACH,EAAA,EAAD,CACEE,GAAIE,IACJC,UAAU,UACVf,KAAK,UACLgB,UAAQ,EACRC,UAAQ,EACRC,SAAO,EACPC,MAAM,QAEN,kBAACL,EAAA,EAAKM,KAAN,KACE,kBAAC,IAAD,CAAMC,GAAG,UACP,kBAACC,EAAA,EAAD,CAAMxB,KAAK,UACX,mDAGJ,kBAACgB,EAAA,EAAKM,KAAN,KACE,kBAAC,IAAD,CAAMC,GAAG,UACP,kBAACC,EAAA,EAAD,CAAMxB,KAAK,UACX,+CAGJ,kBAACgB,EAAA,EAAKM,KAAN,KACE,kBAAC,IAAD,CAAMC,GAAG,SACP,kBAACC,EAAA,EAAD,CAAMxB,KAAK,mBACX,8CAIN,kBAACY,EAAA,EAAQa,OAAT,KACE,kBAAC,WAAD,CAAUC,SAAU,4CAClB,4BAAQC,UAAU,cAChB,kBAAC,IAAD,KACGrB,IAAOlB,KAAI,SAAAwC,GAAK,OAAK,kBAAC,IAAD,iBAAWA,EAAX,CAAkBC,IAAKD,EAAM5B,qB,GA1CnD5C,aCKH0E,G,qBARO,WACpB,OACE,oCACE,kBAAC,EAAD,SCGcC,QACW,cAA7BrD,OAAOlB,SAASwE,UAEe,UAA7BtD,OAAOlB,SAASwE,UAEhBtD,OAAOlB,SAASwE,SAASC,MACvB,2DCXNC,IAASC,OACP,kBAAC,IAAD,KACE,kBAAC,EAAD,OAEFxE,SAASyE,eAAe,SDgIpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.cd640556.chunk.js","sourcesContent":["import React from 'react'\n\nexport default class Loading extends React.Component {\n  render () {\n    return (\n      <div>\n        Loading...\n      </div>\n    )\n  }\n}\n","import { Component } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { createBrowserHistory } from 'history'\n/*\nclass ScrollToTop extends Component {\n  componentDidUpdate (prevProps) {\n    if (this.props.location !== prevProps.location) {\n      window.scrollTo(0, 0)\n    }\n  }\n  render () {\n    return this.props.children\n  }\n}\n*/\n\nvar history = createBrowserHistory()\nhistory.listen((location, action) => {\n  let currentY = document.documentElement.scrollTop || document.body.scrollTop\n  setTimeout(() => {\n    if (action === 'POP') { return }\n    scrollAnimation(currentY, 0)\n  })\n})\n\ninterface ScrollToTopOnMountProps {\n  history: any\n}\nclass ScrollToTopOnMount extends Component<ScrollToTopOnMountProps, {}> {\n  componentDidMount() {\n    let currentY = document.documentElement.scrollTop || document.body.scrollTop\n    if (this.props.history.action === 'POP') { return }\n    scrollAnimation(currentY, 0)\n  }\n  render() {\n    return null\n  }\n}\n\nfunction scrollAnimation(currentY: number, targetY: number): any {\n  let needScrollTop = targetY - currentY\n  let _currentY = currentY\n  setTimeout(() => {\n    const dist = Math.ceil(needScrollTop / 10)\n    _currentY += dist\n    window.scrollTo(_currentY, currentY)\n    if (needScrollTop > 10 || needScrollTop < -10) {\n      scrollAnimation(_currentY, targetY)\n    } else {\n      window.scrollTo(_currentY, targetY)\n    }\n  }, 1)\n}\n\n(ScrollToTopOnMount as any).defaultProps = {\n  history: history\n}\n\n// export default withRouter(ScrollToTop)\nexport default withRouter(ScrollToTopOnMount as any)\n","import React from 'react'\n\ninterface ErrorBoundayState {\n  hasError: boolean\n}\nclass ErrorBounday extends React.Component<{}, ErrorBoundayState> {\n  constructor (props: any) {\n    super(props)\n    this.state = {\n      hasError: false\n    }\n  }\n  \n  static getDerivedStateFromError () {\n    return { hasError: true }\n  }\n\n  render () {\n    if (this.state.hasError) {\n      return <h1>Something Went Wrong.</h1>\n    }\n    return this.props.children\n  }\n}\n\nexport default ErrorBounday\n","import React from 'react' // , { lazy }\nimport Loadable from 'react-loadable'\nimport Loading from '../components/loading'\nimport ScrollToTop from '../components/scroll' // 切换路由时滚动到顶部 返回或前进则滚动高度不变\nimport ErrorBounday from '../components/error' // 错误边界\n\ninterface routeListItem {\n  path: string,\n  name: string,\n  component: any,\n  exact: boolean,\n  icon?: string\n}\n\n\ninterface routeListItem {\n  path: string,\n  name: string,\n  component: any,\n  exact: boolean,\n  icon?: string\n}\n\nfunction setRouterList(routeList: routeListItem[]) {\n  const routes = routeList.map(Element => {\n    const AsyncLoadComponent = asyncLoad(Element.component)\n    // 每次切换路由时 屏幕内容滚动到最上方\n    let ErrorComponent = () => (\n      <ErrorBounday>\n        <ScrollToTop/>\n        <AsyncLoadComponent/>\n      </ErrorBounday>\n    )\n    return { ...Element, component: ErrorComponent }\n  })\n  return routes\n}\n\nfunction asyncLoad(loader: () => Promise<any>) {\n  return Loadable({\n    loader,\n    loading: props => {\n      if (props.pastDelay) {\n        return <Loading />\n      } else {\n        return null\n      }\n    },\n    delay: 500\n  })\n}\n\nexport default setRouterList\n","import setRouterList from  './setRouter'\n/* \n  懒加载组件 有两种方式 推荐使用第二种\n  1. lazy(() => import(组件地址)) 加载组件时会有闪屏 用户体验较差\n  2. Loadable({\n    loader: () => import(组件地址),\n    loading: 占位符组件\n  }) 加载时无闪屏 用户体验较好 但是有已废弃的生命周期警告\n  在相关文件中将componentWillMount改为UNSAFE_componentWillMount\n*/\n//\nconst Login = () => import('../views/login/login')\nconst Games = () => import('../views/sidebar/games')\nconst WebGL = () => import('../views/sidebar/webgl')\nconst NotFound = () => import('../components/404')\nconst TicTacToe = () => import('../views/games/TicTacToe')\nconst Gobang = () => import('../views/games/Gobang')\nconst ChatRoom = () => import('../views/games/Room')\nconst Map3D = () => import('../views/webgl/T1-Map3D')\nconst CreateObjects = () => import('../views/webgl/T2-CreateObjects')\nconst UseTexture = () => import('../views/webgl/T3-UseTexture')\nconst DefaultGeometry = () => import('../views/webgl/T4-DefaultGeometry')\nconst Logs = () =>　import('../views/logs/index')\n/*\n  lazy()方法示例\n  const GobangLazy = lazy(Gobang)\n  const ContextLazy = lazy(Context)\n  const FormLazy = lazy(Form)\n*/\n\nconst sidebarRouter =\n[\n  {\n    path: '/',\n    name: 'home',\n    component: Login,\n    exact: true\n  },\n  {\n    path: '/login',\n    name: 'login',\n    component: Login,\n    exact: false\n  },\n  {\n    path: '/games',\n    name: 'games',\n    component: Games,\n    exact: false\n  },\n  {\n    path: '/webgl',\n    name: 'webgl',\n    component: WebGL,\n    exact: false\n  },\n  {\n    path: '/404',\n    name: '404',\n    component: NotFound,\n    exact: false\n  }\n]\n\nconst gamesRouter =\n[\n  {\n    path: '/gobang',\n    name: '五子棋',\n    component: Gobang,\n    exact: false,\n    icon: 'chess board'\n  },\n  {\n    path: '/ticTacToe',\n    name: '井字棋',\n    component: TicTacToe,\n    exact: false,\n    icon: 'th'\n  },\n  {\n    path: '/chatRoom',\n    name: '联机五子棋',\n    component: ChatRoom,\n    exact: false,\n    icon: 'handshake outline'\n  }\n]\n\nconst webglRouter =\n[\n  {\n    path: '/map3D',\n    name: '3D地图',\n    component: Map3D,\n    exact: false,\n    icon: 'paper plane outline'\n  },\n  {\n    path: '/create-objects',\n    name: '创建物体',\n    component: CreateObjects,\n    exact: false,\n    icon: 'hourglass half'\n  },\n  {\n    path: '/use-texture',\n    name: '使用纹理',\n    component: UseTexture,\n    exact: false,\n    icon: 'barcode'\n  },\n  {\n    path: '/default-geometry',\n    name: '内置几何模型',\n    component: DefaultGeometry,\n    exact: false,\n    icon: 'clone outline'\n  }\n]\n   \nconst logsRouter = [\n  {\n    path: '/logs',\n    name: '内置几何模型',\n    component: Logs,\n    exact: false,\n    icon: 'clone outline'\n  }\n]\nconst routeList = [...sidebarRouter, ...gamesRouter, ...webglRouter, ...logsRouter]\nexport const gamesRoutes = setRouterList(gamesRouter)\nexport const webglRoutes = setRouterList(webglRouter)\nexport const routes = setRouterList(routeList)\n","import React, { Suspense, Component } from 'react'\nimport { Route, Switch, Link } from 'react-router-dom'\nimport { routes } from '../../router/routes'\nimport { Icon, Menu, Segment, Sidebar } from 'semantic-ui-react'\n\ninterface NavState {\n  isOpen: boolean\n}\n\nclass Nav extends Component<{}, NavState> {\n  toggleMenu = (status: boolean) => {\n    this.setState({\n      isOpen: !status\n    })\n  }\n  render() {\n    return (\n      <Route>\n        <Sidebar.Pushable as={Segment}>\n          <Sidebar\n            as={Menu}\n            animation='overlay'\n            icon='labeled'\n            inverted\n            vertical\n            visible\n            width='thin'\n          >\n            <Menu.Item>\n              <Link to='/games'>\n                <Icon name='chess' />\n                <p>游戏室</p>\n              </Link>\n            </Menu.Item>\n            <Menu.Item>\n              <Link to='/webgl'>\n                <Icon name='globe' />\n                <p>3D世界</p>\n              </Link>\n            </Menu.Item>\n            <Menu.Item>\n              <Link to='/logs'>\n                <Icon name='file alternate' />\n                <p>日志</p>\n              </Link>\n            </Menu.Item>\n          </Sidebar>\n          <Sidebar.Pusher>\n            <Suspense fallback={<div>Loading...</div>}>\n              <header className=\"App-header\">\n                <Switch>\n                  {routes.map(route => (<Route {...route} key={route.name}/>))}\n                </Switch>\n              </header>\n            </Suspense>\n          </Sidebar.Pusher>\n        </Sidebar.Pushable>\n      </Route>\n    )\n  }\n}\n\nexport default Nav\n","import React from 'react'\nimport Sidebar from './views/sidebar/siderbar'\nimport 'semantic-ui-css/semantic.min.css'\nimport './assets/sass/App.scss'\nimport './assets/sass/style.scss'\n\nconst App: React.FC = () => {\n  return (\n    <>\n      <Sidebar />\n    </>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\nimport './assets/sass/index.scss'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}