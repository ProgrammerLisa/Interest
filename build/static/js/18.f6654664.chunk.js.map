{"version":3,"sources":["utils/request/config.ts","utils/request/index.ts","views/login/login.tsx","utils/api/login.ts"],"names":["config","baseURL","testBaseURL","IP","testIP","fetch","axios","create","timeout","interceptors","request","use","method","data","headers","qs","stringify","error","Promise","reject","response","a","async","status","console","log","ToLogin","props","synchronizationAccount","e","setState","account","target","value","synchronizationPsw","password","login","param","_this","state","url","then","res","code","localStorage","setItem","JSON","history","push","this","getItem","Form","Field","className","placeholder","onChange","Button","inverted","color","type","onClick","React","Component","Login","withRouter"],"mappings":"yGAAA,kCAAO,IAAMA,EAAS,CACpBC,QAAS,8BACTC,YAAa,wBACbC,GAAI,uBACJC,OAAQ,mB,oGCDNC,EAAQC,IAAMC,OAAO,CACvBN,QAASD,IAAOC,QAChBO,QAAS,MAGXH,EAAMI,aAAaC,QAAQC,KAAI,SAAAX,GAM7B,MALsB,SAAlBA,EAAOY,QAAuC,QAAlBZ,EAAOY,QAAsC,WAAlBZ,EAAOY,QACpC,kBAAjBZ,EAAOa,MAAyD,wBAAnCb,EAAOc,QAAQ,kBACrDd,EAAOa,KAAOE,IAAGC,UAAUhB,EAAOa,OAG/Bb,KACN,SAAAiB,GACDC,QAAQC,OAAOF,MAGjBZ,EAAMI,aAAaW,SAAST,KAAI,SAAME,GAAN,SAAAQ,EAAAC,OAAA,yEACvBT,EAAKA,MADkB,wCAE7B,SAAAI,GACD,OAAIA,EAAMG,UACsB,MAA1BH,EAAMG,SAASG,QACjBC,QAAQC,IAAI,wFAEPP,QAAQC,OAAOF,EAAMG,SAASP,OAE9BK,QAAQC,OAAOF,MAIXZ,O,2JCrBTqB,E,YACJ,WAAYC,GAAa,IAAD,8BACtB,4CAAMA,KAmBRC,uBAAyB,SAACC,GACxB,EAAKC,SAAS,CAAEC,QAASF,EAAEG,OAAOC,SArBZ,EAwBxBC,mBAAqB,SAACL,GACpB,EAAKC,SAAS,CAAEK,SAAUN,EAAEG,OAAOC,SAzBb,EA4BxBG,MAAQ,WACN,ICvCsBC,EDuChBC,EAAK,eACN,EAAKC,MAAgBR,SAAY,EAAKQ,MAAgBJ,WCxCrCE,EDyCV,eAAKC,EAAMC,OCxClBlC,YAAM,CACXmC,IAAK,aACL5B,OAAQ,OACRC,KAAMwB,KDqC0BI,MAAK,SAAAC,GACP,MAArBA,EAAYC,OACfC,aAAaC,QAAQ,eAAgBC,KAAK9B,UAAU,CAACe,QAASW,EAAI7B,KAAKkB,WACtE,EAAKJ,MAAcoB,QAAQC,KAAK,eAhCvC,EAAKT,MAAQ,CACXR,QAAS,GACTI,SAAU,IAJU,E,yFAQK,IACnBY,EAAiBE,KAAKtB,MAAtBoB,QACaH,aAAaM,QAAQ,iBAExCH,EAAQC,KAAK,gB,+BA6Bf,OACE,kBAACG,EAAA,EAAD,KACE,kBAACA,EAAA,EAAKC,MAAN,KACE,2BAAOC,UAAU,eAAjB,gBACA,2BAAOC,YAAY,eAAKrB,MAAQgB,KAAKV,MAAgBR,QAASwB,SAAUN,KAAKrB,0BAE/E,kBAACuB,EAAA,EAAKC,MAAN,KACE,2BAAOC,UAAU,eAAjB,gBACA,2BAAOC,YAAY,eAAKrB,MAAQgB,KAAKV,MAAgBJ,SAAUoB,SAAUN,KAAKf,sBAEhF,kBAACsB,EAAA,EAAD,CAAQC,UAAQ,EAACC,MAAM,SAASC,KAAK,SAASC,QAASX,KAAKb,OAA5D,qB,GApDcyB,IAAMC,WA0DtBC,EAAQC,YAAWtC,GACVqC","file":"static/js/18.f6654664.chunk.js","sourcesContent":["export const config = {\n  baseURL: 'http://111.229.226.139:9277',\n  testBaseURL: 'http://localhost:9277',\n  IP: '111.229.226.139:9277',\n  testIP: 'localhost:9277'\n}","import axios from 'axios'\nimport qs from 'qs'\nimport { config } from './config'\nlet fetch = axios.create({\n  baseURL: config.baseURL,\n  timeout: 30000\n})\n\nfetch.interceptors.request.use(config => {\n  if (config.method === 'post' || config.method === 'put' || config.method === 'delete') {\n    if (typeof(config.data) !== 'string' && config.headers['Content-Type'] !== 'multipart/form-data') {\n      config.data = qs.stringify(config.data)\n    }\n  }\n  return config\n}, error => {\n  Promise.reject(error)\n})\n\nfetch.interceptors.response.use(async data => {\n  return data.data\n}, error => {\n  if (error.response) {\n    if (error.response.status === 500) {\n      console.log('服务器错误，请联系管理员处理')\n    }\n    return Promise.reject(error.response.data)\n  } else {\n    return Promise.reject(error)\n  }\n})\n\nexport default fetch\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { withRouter } from 'react-router'\nimport { Button, Form } from 'semantic-ui-react'\nimport { loginUser } from '../../utils/api/login'\n\ninterface State {\n  account: string,\n  password: string\n}\n\nclass ToLogin extends React.Component{\n  constructor(props: any) {\n    super(props)\n    this.state = {\n      account: '',\n      password: ''\n    }\n  }\n\n  UNSAFE_componentWillMount() {\n    const { history }: any = this.props\n    const loginSuccess = localStorage.getItem('kmr_userInfo')\n    if (loginSuccess) {\n      history.push('/ticTacToe')\n    } \n  }\n\n  static propTypes = {\n    history: PropTypes.object.isRequired\n  }\n\n  synchronizationAccount = (e: any) => {\n    this.setState({ account: e.target.value })\n  }\n\n  synchronizationPsw = (e: any) => {\n    this.setState({ password: e.target.value })\n  }\n\n  login = () => {\n    const _this = this\n    if ((this.state as State).account && (this.state as State).password) {\n      loginUser({ ..._this.state }).then(res => {\n        if ((res as any).code === 200) {\n          localStorage.setItem('kmr_userInfo', JSON.stringify({account: res.data.account}));\n          (this.props as any).history.push('/games')\n        }\n      })\n    }\n  }\n\n  render() {\n    return (\n      <Form>\n        <Form.Field>\n          <label className='input-label'>账号</label>\n          <input placeholder='账号' value={(this.state as State).account} onChange={this.synchronizationAccount} />\n        </Form.Field>\n        <Form.Field>\n          <label className='input-label'>密码</label>\n          <input placeholder='密码' value={(this.state as State).password} onChange={this.synchronizationPsw} />\n        </Form.Field>\n        <Button inverted color='violet' type='submit' onClick={this.login}>登录</Button>\n      </Form>\n    )\n  }\n}\n\nconst Login = withRouter(ToLogin as any)\nexport default Login\n","import fetch from '../request/index'\n\nexport function loginUser(param: any) {\n  return fetch({\n    url: '/api/login',\n    method: 'post',\n    data: param\n  })\n}\n\nexport function test() {\n  return fetch({\n    url: '/home',\n    method: 'get'\n  })\n}\n"],"sourceRoot":""}