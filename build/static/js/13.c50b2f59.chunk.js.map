{"version":3,"sources":["views/games/Gobang.tsx"],"names":["Square","props","className","name","onClick","value","Checkerboard","i","type","key","this","square","columnSum","rowSum","num","columns","count","column","rows","row","push","renderSquare","renderRow","Component","Game","state","winner","Array","balckIsNext","forEach","rule","contentMap","map","sub","join","replace","RegExp","member","calculateWinner","console","log","v","setState","status","hanldClick"],"mappings":"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","file":"static/js/13.c50b2f59.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport '../../assets/sass/Gobang.css'\r\n\r\nfunction Square(props: any) {\r\n  return (\r\n    <button className={`square ${props.name}`} onClick={() => props.onClick()}>\r\n      {props.name === 'board-line' ? <span className={`piece ${props.value}`}></span> : ''}\r\n    </button>\r\n  )\r\n}\r\n\r\n\r\ninterface SquareType {\r\n  [index: number]: string\r\n}\r\n\r\ninterface CheckerboardProps {\r\n  square: SquareType,\r\n  onClick: (i: number) => void,\r\n  column: number,\r\n  row: number\r\n}\r\nclass Checkerboard extends Component<CheckerboardProps, {}> {\r\n  renderSquare(i: number, type: String) {\r\n    return (\r\n      <Square key={`square${i}`} name={type} value={this.props.square[i]} onClick={() => {this.props.onClick(i)}} />\r\n    )\r\n  }\r\n  renderRow(type: string, columnSum: number, rowSum: number) {\r\n    let num = rowSum + 1\r\n    if (type === 'board-line') num = rowSum\r\n    let columns = [], count = 0\r\n    for (let column = 0; column < columnSum + 1; column++) {\r\n      let rows = []\r\n      for (let row = 0; row < num; row++) {\r\n        rows.push(this.renderSquare(count, type))\r\n        count++\r\n      }\r\n      columns.push(<div className=\"board-row\" key={`row${column}`}>{rows}</div>)\r\n    }\r\n    return columns\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"board-container\">\r\n        <div className=\"board-border\"></div>\r\n        <div className=\"board-foundation-container\">{this.renderRow('', this.props.column, this.props.row)}</div>\r\n        <div className=\"board-line-container\">{this.renderRow('board-line', this.props.column, this.props.row)}</div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\ninterface GameState {\r\n  winner: any,\r\n  column: number,\r\n  row: number,\r\n  square: SquareType,\r\n  balckIsNext: boolean\r\n}\r\nclass Game extends Component<{}, GameState> {\r\n  constructor(props: any) {\r\n    super(props)\r\n    const row = 20\r\n    const column = 20\r\n    this.state = {\r\n      winner: null,\r\n      column: column,\r\n      row: row,\r\n      square: new Array(column * row),\r\n      balckIsNext: false\r\n    }\r\n  }\r\n  hanldClick (i: number): void {\r\n    let square = this.state.square\r\n    if (square[i]) return\r\n    square[i] = this.state.balckIsNext ? 'piece-black' : 'piece-white'\r\n    let winner: any = ''\r\n    if (this.state.winner) {\r\n      return\r\n    } else {\r\n      winner = calculateWinner(square, i, this.state.row)\r\n      if (winner) {\r\n        console.log(winner.member)\r\n        winner.member.forEach((v: number) => {\r\n          square[v] = 'piece-winner'\r\n        })\r\n      }\r\n    }\r\n    this.setState({\r\n      winner: winner,\r\n      square: square,\r\n      balckIsNext: !this.state.balckIsNext\r\n    })\r\n  }\r\n  render() {\r\n    const winner = this.state.winner\r\n    let status\r\n    if (winner) {\r\n      status = 'winner --- ' + winner.winner\r\n    } else {\r\n      status = 'Next Player --- ' + (this.state.balckIsNext ? '黑子' : '白子')\r\n    }\r\n    return (\r\n      <div>\r\n        <p>{status}</p>\r\n        <Checkerboard square={this.state.square} column={this.state.column} row={this.state.row} onClick={(i) => this.hanldClick(i)}></Checkerboard>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction calculateWinner(square: SquareType, i: number, row: number) {\r\n  var winnerList = [\r\n    // 横向连接\r\n    [i, i + 1, i + 2, i + 3, i + 4],\r\n    [i - 1, i, i + 1, i + 2, i + 3],\r\n    [i - 2, i - 1, i, i + 1, i + 2],\r\n    [i - 3, i - 2, i - 1, i, i + 1],\r\n    [i - 4, i - 3, i - 2, i - 1, i],\r\n    // 纵向连接\r\n    [i, i + row, i + row*2, i + row*3, i + row*4],\r\n    [i - row, i, i + row, i + row*2, i + row*3],\r\n    [i - row*2, i - row, i, i + row, i + row*2],\r\n    [i - row*3, i - row*2, i - row, i, i + row],\r\n    [i - row*4, i - row*3, i - row*2, i - row, i],\r\n    // 左上-右下 斜向连接\r\n    [i, i + row + 1, i + 2*(row + 1), i + (row + 1)*3, i + (row + 1)*4],\r\n    [i - (row + 1), i, i + row + 1, i + 2*(row + 1), i + (row + 1)*3],\r\n    [i - (row + 1)*2, i - (row + 1), i, i + row + 1, i + 2*(row + 1)],\r\n    [i - (row + 1)*3, i - (row + 1)*2, i - (row + 1), i, i + row + 1],\r\n    [i - (row + 1)*4, i - (row + 1)*3, i - (row + 1)*2, i - (row + 1), i],\r\n    // 右上-左下 斜向连接\r\n    [i, i + row - 1, i + 2*(row - 1), i + (row - 1)*3, i + (row - 1)*4],\r\n    [i - (row - 1), i, i + row - 1, i + 2*(row - 1), i + (row - 1)*3],\r\n    [i - (row - 1)*2, i - (row - 1), i, i + row - 1, i + 2*(row - 1)],\r\n    [i - (row - 1)*3, i - (row - 1)*2, i - (row - 1), i, i + row - 1],\r\n    [i - (row - 1)*4, i - (row - 1)*3, i - (row - 1)*2, i - (row - 1), i]\r\n  ]\r\n  let winner = null\r\n  winnerList.forEach(rule => {\r\n    let contentMap = rule.map(sub => {\r\n      return square[sub]\r\n    })\r\n    if ((contentMap.join(',') + ',').replace(new RegExp(contentMap[0] + ',', 'gi'), '') === '') {\r\n      winner =  { winner: square[i], member: rule }\r\n    }\r\n  })\r\n  return winner\r\n}\r\n\r\nexport default Game"],"sourceRoot":""}